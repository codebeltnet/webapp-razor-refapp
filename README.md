# ASP.NET Core Web App for Razor

Sample ASP.NET Core Web App for Razor reference application, powered by Codebelt, based on the standard project generated by Microsoft.

## Getting Started

There are two ways to use this reference application:

You can clone this project: `git clone https://github.com/codebeltnet/webapp-razor-refapp.git`

-or-

You can install a new template using `dotnet new --install Codebelt.Template.WebApp.Razor` and hereafter do something like `dotnet new cb-webapp -o %USERPROFILE%\source\repos\MyApp7`

Note:

+ Environment is set to `LocalDevelopment`
+ The `approot` and `cdnroot` folder should only be used locally, eg. `LocalDevelopment` environment

## Solution Structure

The solution file, docker-compose and preview nuget sources is placed in the root of the repo.

The project itself, Codebelt.WebApp.Razor, is placed in `src`.

Example of structure:

```
/Codebelt.WebApp.Razor.sln
/docker-compose.yml
/NuGet.config
/src/Codebelt.WebApp.Razor/approot/<static files tailored to the app>
/src/Codebelt.WebApp.Razor/cdnroot/<static files shared by many>
/src/Codebelt.WebApp.Razor/Pages/<default razor pages by Microsoft>
/src/Codebelt.WebApp.Razor/appsettings.Development.json
/src/Codebelt.WebApp.Razor/appsettings.json
/src/Codebelt.WebApp.Razor/appsettings.LocalDevelopment.json
/src/Codebelt.WebApp.Razor/appsettings.Production.json
/src/Codebelt.WebApp.Razor/appsettings.Staging.json
/src/Codebelt.WebApp.Razor/Codebelt.WebApp.Razor.csproj
/src/Codebelt.WebApp.Razor/Dockerfile
/src/Codebelt.WebApp.Razor/Dockerfile.app-static
/src/Codebelt.WebApp.Razor/Dockerfile.cdn-static
/src/Codebelt.WebApp.Razor/Program.cs
/src/Codebelt.WebApp.Razor/Startup.cs
```

## Environments

All Codebelt projects work with 4 different types of environments, where only one deviates from industry standards; `LocalDevelopment`.

However, more often than not, we need to have an environment that was thought out to be an isolated environment for developer machines, eg. allow more relaxed rules in terms of user secrets, local dependencies and so forth.

`Development`, in particular, should be used for centralized developer testing before pushing changes to `Staging`.

+ `LocalDevelopment` (typically where the app is being forged)
+ `Development` (centralized developer testing of the app)
+ `Staging` (dress rehearsal of the app)
+ `Production` (done-done - we are live)

`Development`, `Staging` and `Production` should be environments outside the developers machine, as these (depending on your setup) are part of the CI/CD flow and used for their respective scopes.

## Docker

The 3 Docker files each has there own role:

+ `Dockerfile` (the app itself)
+ `Dockerfile.app-static` (the static files tied to the app)
+ `Dockerfile.cdn-static` (the static files suited to be shared between your apps on a CDN)

## Example

As a quick example I have spun up 3 environments matching what is defined in appsettings.Development.json, appsettings.Staging.json and appsettings.Production.json.

CDN is setup on Azure using a source origins poiting to dev-cdn.codebelt.net, stg-cdn.codebelt.net and cdn.codebelt.net.

This is just to provide seed of inspiration.

You can test the 3 environments yourself (nothing fancy; just the sample code provided by Microsoft adjusted to "static content separation"):

+ Development - https://dev-webapp-razor.codebelt.net/
+ Staging - https://stg-webapp-razor.codebelt.net/
+ Production - https://webapp-razor.codebelt.net/

---

Code with passion; love your code; deliver with pride üë®‚ÄçüíªÔ∏èüî•‚ù§Ô∏èüöÄü§ò
